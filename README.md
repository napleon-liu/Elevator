# 第一次上机的设计

## 类设计

1. Building 是存放乘客与电梯的容器
2. Elevator 存放乘客的容器，能够在建筑中运动
3. Passenger 随机的生成在建筑的不同楼层间，能够在建筑与电梯间转移
4. EvtCtrl 电梯组，拥有初始状态在一楼的十个电梯

## 运行逻辑

模拟仿真系统开始时，在建筑中随机的生成1-100个乘客、十部电梯。为每位乘客分配一部电梯。电梯类中会存储总的乘客请求数目。

各电梯独立运行，开始时电梯全部上行，每到一层楼都要检查是否有请求的乘客或到达了乘客的目的地，以进行上下乘客操作。电梯持续上行，直至请求为0且到达了乘客请求的最高 楼层或到达了建筑的最高楼层(40层),开始下行，下行过程中直至所有乘客都出了电梯该电梯的模拟过程结束。

## 时间戳

本次模拟系统中使用系统时间作为时间戳，电梯在两个楼层之间的运行时间为2s，未考虑乘客上下电梯所花费的时间问题。

## 运行

src/include中存放着头文件 src/main中存放着源文件，CMakeLists.txt中写好了编译规则。

# 第二次上机的设计

## 类设计
本次上机在上机1的基础上进行了部分修改。首先是删除了EvtCtrl类，原因是该类的作用可有可无。新增了Timer类，该类是一个Sigleon类，用于模拟时钟。在时钟的激励下，
系统进行状态的更新。新增了一个头文件ConstValues.h，用于存放枚举量与其他常量。
## 对上机要求的实现
1. 每名乘客产生多次请求
初始时所有乘客均为BeforeSimulation状态，具有一定的模拟次数，根据乘客的目的地选择合适的电梯让其乘坐，当达到目的地后，乘客的当前模拟次数自增一次。当乘客的当前
模拟次数达到总模拟次数后，乘客发起的请求总是前往一楼，并销毁乘客。当所有乘客都被销毁后，仿真流程结束。
2. 电梯分配问题
根据乘客的当前楼层为乘客分配合适的电梯。一共有三种合适的电梯：停止的电梯、电梯在乘客下方并朝着乘客上方前进、反之。在所有合适的电梯中，将离乘客最近的电梯分配给乘客。
## 其他方面的更改
对程序的可视化方面进行了优化。在程序中新增了部分异常处理的语句。